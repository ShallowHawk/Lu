# æœ¨å¤´çš„ç ´å£³æ—¥ç½‘ç«™ - éƒ¨ç½²æŒ‡å— ğŸš€

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS, Linux
- **Node.js**: 18+ 
- **Python**: 3.8+
- **å†…å­˜**: æœ€ä½1GB RAM
- **å­˜å‚¨**: æœ€ä½500MBå¯ç”¨ç©ºé—´

### å¿…éœ€å·¥å…·
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version

# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version
```

## ğŸ  æœ¬åœ°å¼€å‘ç¯å¢ƒ

### 1. å…‹éš†é¡¹ç›®
```bash
# å¦‚æœæœ‰Gitä»“åº“
git clone https://github.com/username/birthday-website.git

# æˆ–è€…ç›´æ¥ä½¿ç”¨å·²æœ‰çš„æ–‡ä»¶å¤¹
cd D:\LinLu
```

### 2. å‰ç«¯é¡¹ç›®å¯åŠ¨
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd birthday-website

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 3. åç«¯æœåŠ¡å¯åŠ¨
```bash
# æ‰“å¼€æ–°ç»ˆç«¯ï¼Œè¿›å…¥åç«¯ç›®å½•
cd sleepy-status

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨FlaskæœåŠ¡
python app.py
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:5000` å¯åŠ¨

### 4. éªŒè¯æœ¬åœ°ç¯å¢ƒ
- è®¿é—® `http://localhost:3000` æŸ¥çœ‹ç½‘ç«™
- è®¿é—® `http://localhost:5000` æŸ¥çœ‹APIæœåŠ¡
- è®¿é—® `http://localhost:5000/status_page` æŸ¥çœ‹çŠ¶æ€é¡µé¢

## ğŸŒ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ–¹æ¡ˆä¸€ï¼šæœåŠ¡å™¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å‡†å¤‡æœåŠ¡å™¨
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…å¿…è¦è½¯ä»¶
sudo apt install -y nginx nodejs npm python3 python3-pip git

# å®‰è£…PM2ï¼ˆNode.jsè¿›ç¨‹ç®¡ç†å™¨ï¼‰
npm install -g pm2
```

#### 2. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
```bash
# ä½¿ç”¨SCPä¸Šä¼ 
scp -r /path/to/birthday-website user@server:/var/www/
scp -r /path/to/sleepy-status user@server:/var/www/

# æˆ–ä½¿ç”¨Git
git clone https://github.com/username/birthday-website.git /var/www/birthday-website
```

#### 3. æ„å»ºå‰ç«¯é¡¹ç›®
```bash
cd /var/www/birthday-website

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# ç”Ÿæˆé™æ€æ–‡ä»¶
npm run generate
```

#### 4. é…ç½®åç«¯æœåŠ¡
```bash
cd /var/www/sleepy-status

# å®‰è£…Pythonä¾èµ–
pip3 install -r requirements.txt

# åˆ›å»ºç³»ç»ŸæœåŠ¡
sudo nano /etc/systemd/system/sleepy-status.service
```

ç³»ç»ŸæœåŠ¡é…ç½®ï¼š
```ini
[Unit]
Description=Sleepy Status Service
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/var/www/sleepy-status
Environment=PYTHONPATH=/var/www/sleepy-status
ExecStart=/usr/bin/python3 app.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl enable sleepy-status
sudo systemctl start sleepy-status
sudo systemctl status sleepy-status
```

#### 5. é…ç½®Nginx
```bash
sudo nano /etc/nginx/sites-available/birthday-website
```

Nginxé…ç½®ï¼š
```nginx
server {
    listen 80;
    server_name your-domain.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸå
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/birthday-website/.output/public;
        try_files $uri $uri/ /index.html;
        
        # ç¼“å­˜é™æ€èµ„æº
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
            expires 1y;
            add_header Cache-Control "public, no-transform";
        }
    }
    
    # APIä»£ç†
    location /api/ {
        proxy_pass http://127.0.0.1:5000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # çŠ¶æ€é¡µé¢
    location /status {
        proxy_pass http://127.0.0.1:5000/status_page;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

å¯ç”¨ç«™ç‚¹ï¼š
```bash
sudo ln -s /etc/nginx/sites-available/birthday-website /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

#### 6. é…ç½®HTTPSï¼ˆå¯é€‰ä½†æ¨èï¼‰
```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx

# è·å–SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ï¼š0 12 * * * /usr/bin/certbot renew --quiet
```

### æ–¹æ¡ˆäºŒï¼šDockeréƒ¨ç½²

#### 1. åˆ›å»ºå‰ç«¯Dockerfile
```dockerfile
# birthday-website/Dockerfile
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build
RUN npm run generate

FROM nginx:alpine
COPY --from=0 /app/.output/public /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

#### 2. åˆ›å»ºåç«¯Dockerfile
```dockerfile
# sleepy-status/Dockerfile
FROM python:3.9-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .
EXPOSE 5000

CMD ["python", "app.py"]
```

#### 3. åˆ›å»ºDocker Compose
```yaml
# docker-compose.yml
version: '3.8'

services:
  frontend:
    build: ./birthday-website
    ports:
      - "80:80"
    depends_on:
      - backend
    networks:
      - birthday-network

  backend:
    build: ./sleepy-status
    ports:
      - "5000:5000"
    volumes:
      - ./sleepy-status/data.json:/app/data.json
      - ./sleepy-status/history.json:/app/history.json
    networks:
      - birthday-network

networks:
  birthday-network:
    driver: bridge
```

#### 4. å¯åŠ¨å®¹å™¨
```bash
docker-compose up -d
```

## ğŸ“± ç§»åŠ¨ç«¯çŠ¶æ€æ›´æ–°è®¾ç½®

### Androidè®¾ç½®ï¼ˆMacrodroidï¼‰

1. **ä¸‹è½½å®‰è£…Macrodroid**
   - Google Play Storeæœç´¢"Macrodroid"
   - å®‰è£…å¹¶ç»™äºˆå¿…è¦æƒé™

2. **åˆ›å»ºçŠ¶æ€æ›´æ–°å®**
   
   **ç¡çœ çŠ¶æ€**ï¼š
   ```
   è§¦å‘å™¨ï¼šæ—¶é—´è§¦å‘ - 23:00
   åŠ¨ä½œï¼šHTTPè¯·æ±‚
   - URL: http://your-domain.com/api/set?secret=birthday2024&status=1
   - æ–¹æ³•: GET
   - è¶…æ—¶: 10ç§’
   ```

   **å·¥ä½œçŠ¶æ€**ï¼š
   ```
   è§¦å‘å™¨ï¼šåº”ç”¨å¯åŠ¨ - é€‰æ‹©å·¥ä½œç›¸å…³APP
   åŠ¨ä½œï¼šHTTPè¯·æ±‚
   - URL: http://your-domain.com/api/set?secret=birthday2024&status=2
   - æ–¹æ³•: GET
   ```

   **è¿åŠ¨çŠ¶æ€**ï¼š
   ```
   è§¦å‘å™¨ï¼šåº”ç”¨å¯åŠ¨ - è¿åŠ¨APPï¼ˆKeepã€Nike Runç­‰ï¼‰
   åŠ¨ä½œï¼šHTTPè¯·æ±‚
   - URL: http://your-domain.com/api/set?secret=birthday2024&status=3
   - æ–¹æ³•: GET
   ```

   **å¨±ä¹çŠ¶æ€**ï¼š
   ```
   è§¦å‘å™¨ï¼šåº”ç”¨å¯åŠ¨ - å“”å“©å“”å“©
   åŠ¨ä½œï¼šHTTPè¯·æ±‚
   - URL: http://your-domain.com/api/set?secret=birthday2024&status=4
   - æ–¹æ³•: GET
   ```

### iOSè®¾ç½®ï¼ˆå¿«æ·æŒ‡ä»¤ï¼‰

1. **æ‰“å¼€å¿«æ·æŒ‡ä»¤åº”ç”¨**
   - åˆ›å»º"ä¸ªäººè‡ªåŠ¨åŒ–"

2. **åˆ›å»ºçŠ¶æ€æ›´æ–°è‡ªåŠ¨åŒ–**
   
   **æ—¶é—´è§¦å‘**ï¼š
   ```
   è§¦å‘å™¨ï¼šæ—¶é—´ - æ¯å¤©09:00
   åŠ¨ä½œï¼šè·å–URLå†…å®¹
   - URL: http://your-domain.com/api/set?secret=birthday2024&status=2
   - æ–¹æ³•: GET
   ```

   **APPå¯åŠ¨è§¦å‘**ï¼š
   ```
   è§¦å‘å™¨ï¼šAPP - é€‰æ‹©ç›®æ ‡APP
   åŠ¨ä½œï¼šè·å–URLå†…å®¹
   - URL: http://your-domain.com/api/set?secret=birthday2024&status=å¯¹åº”çŠ¶æ€ID
   - æ–¹æ³•: GET
   ```

### æ‰‹åŠ¨æ›´æ–°ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰

å¦‚æœè‡ªåŠ¨åŒ–è®¾ç½®å¤æ‚ï¼Œå¯ä»¥åˆ›å»ºå¿«æ·æ–¹å¼ï¼š

```bash
# åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼è„šæœ¬
# work.sh
curl "http://your-domain.com/api/set?secret=birthday2024&status=2"

# sleep.sh  
curl "http://your-domain.com/api/set?secret=birthday2024&status=1"

# exercise.sh
curl "http://your-domain.com/api/set?secret=birthday2024&status=3"
```

## ğŸ”§ é…ç½®è‡ªå®šä¹‰

### 1. ä¿®æ”¹é‡è¦æ—¥æœŸ
ç¼–è¾‘ `components/LoveTimer.vue`ï¼š
```javascript
// ç¬¬27è¡Œ
const loveStartDate = new Date('2022-11-02T00:00:00') // æ‹çˆ±å¼€å§‹æ—¶é—´
```

ç¼–è¾‘ `components/BirthdayCountdown.vue`ï¼š
```javascript
// ç¬¬15-16è¡Œ
const mutouBirthday = new Date('2024-07-16T00:00:00') // æœ¨å¤´ç”Ÿæ—¥
const myBirthday = new Date('2024-07-27T00:00:00')     // æˆ‘çš„ç”Ÿæ—¥
```

### 2. æ›´æ¢é¢œè‰²ä¸»é¢˜
ç¼–è¾‘ `assets/css/main.scss`ï¼š
```scss
:root {
  // ä¿®æ”¹ä¸»é¢˜è‰²
  --primary-start: #FF6B6B;
  --primary-end: #FFB6C1;
  --secondary: #E6E6FA;
  --accent: #B76E79;
}
```

### 3. æ·»åŠ è‡ªå®šä¹‰çŠ¶æ€
ç¼–è¾‘ `sleepy-status/data.json`ï¼š
```json
{
  "status_list": {
    "9": {
      "name": "æ–°çŠ¶æ€",
      "desc": "è‡ªå®šä¹‰æè¿°",
      "color": "#FF5722"
    }
  }
}
```

åŒæ—¶æ›´æ–°å‰ç«¯ `components/StatusCard.vue` ä¸­çš„çŠ¶æ€é…ç½®ã€‚

### 4. æ›´æ¢èƒŒæ™¯éŸ³ä¹
1. å°†éŸ³é¢‘æ–‡ä»¶æ”¾å…¥ `public/audio/` ç›®å½•
2. æ”¯æŒæ ¼å¼ï¼šMP3, OGG, WAV
3. å»ºè®®æ–‡ä»¶å¤§å°ï¼š< 5MB

## ğŸ”’ å®‰å…¨é…ç½®

### 1. æ›´æ”¹é»˜è®¤å¯†é’¥
ç¼–è¾‘ `sleepy-status/data.json`ï¼š
```json
{
  "secret": "your_strong_secret_key_here"
}
```

### 2. é…ç½®é˜²ç«å¢™
```bash
# Ubuntu/Debian
sudo ufw allow 22
sudo ufw allow 80
sudo ufw allow 443
sudo ufw enable

# CentOS/RHEL
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

### 3. é™åˆ¶APIè®¿é—®
åœ¨ `sleepy-status/app.py` ä¸­æ·»åŠ ï¼š
```python
from functools import wraps
from flask import request, jsonify

def require_api_key(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        api_key = request.headers.get('X-API-Key')
        if api_key != 'your_api_key':
            return jsonify({'error': 'Invalid API key'}), 401
        return f(*args, **kwargs)
    return decorated_function

@app.route('/set')
@require_api_key
def set_status():
    # åŸæœ‰é€»è¾‘
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. è®¾ç½®ç›‘æ§è„šæœ¬
```bash
#!/bin/bash
# monitor.sh

# æ£€æŸ¥å‰ç«¯æœåŠ¡
if ! curl -s http://localhost:3000 > /dev/null; then
    echo "å‰ç«¯æœåŠ¡å¼‚å¸¸"
    # å‘é€é€šçŸ¥æˆ–é‡å¯æœåŠ¡
fi

# æ£€æŸ¥åç«¯æœåŠ¡
if ! curl -s http://localhost:5000/query > /dev/null; then
    echo "åç«¯æœåŠ¡å¼‚å¸¸"
    sudo systemctl restart sleepy-status
fi
```

### 2. æ—¥å¿—è½®è½¬
```bash
# åˆ›å»ºlogrotateé…ç½®
sudo nano /etc/logrotate.d/birthday-website

/var/log/birthday-website/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    sharedscripts
    postrotate
        sudo systemctl reload sleepy-status
    endscript
}
```

### 3. å®šæœŸå¤‡ä»½
```bash
#!/bin/bash
# backup.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/var/backups/birthday-website"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p "$BACKUP_DIR"

# å¤‡ä»½æ•°æ®æ–‡ä»¶
cp /var/www/sleepy-status/data.json "$BACKUP_DIR/data_$DATE.json"
cp /var/www/sleepy-status/history.json "$BACKUP_DIR/history_$DATE.json"

# å¤‡ä»½ç½‘ç«™æ–‡ä»¶
tar -czf "$BACKUP_DIR/website_$DATE.tar.gz" /var/www/birthday-website

# æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™7å¤©ï¼‰
find "$BACKUP_DIR" -name "*.json" -mtime +7 -delete
find "$BACKUP_DIR" -name "*.tar.gz" -mtime +7 -delete
```

æ·»åŠ åˆ°crontabï¼š
```bash
crontab -e
# æ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * /path/to/backup.sh
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜è§£å†³

1. **å‰ç«¯æ„å»ºå¤±è´¥**
   ```bash
   # æ¸…ç†ç¼“å­˜
   npm cache clean --force
   rm -rf node_modules package-lock.json
   npm install
   ```

2. **åç«¯æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tlnp | grep 5000
   
   # æ£€æŸ¥Pythonè·¯å¾„
   which python3
   ```

3. **Nginxé…ç½®é”™è¯¯**
   ```bash
   # æµ‹è¯•é…ç½®
   sudo nginx -t
   
   # æŸ¥çœ‹é”™è¯¯æ—¥å¿—
   sudo tail -f /var/log/nginx/error.log
   ```

4. **çŠ¶æ€æ›´æ–°å¤±è´¥**
   ```bash
   # æµ‹è¯•API
   curl -X GET "http://localhost:5000/set?secret=birthday2024&status=2"
   
   # æ£€æŸ¥æ•°æ®æ–‡ä»¶æƒé™
   ls -la /var/www/sleepy-status/data.json
   ```

### ç´§æ€¥æ¢å¤

```bash
# æ¢å¤æ•°æ®æ–‡ä»¶
cp /var/backups/birthday-website/data_latest.json /var/www/sleepy-status/data.json

# é‡å¯æ‰€æœ‰æœåŠ¡
sudo systemctl restart sleepy-status
sudo systemctl restart nginx

# é‡æ–°æ„å»ºå‰ç«¯
cd /var/www/birthday-website
npm run build
npm run generate
```

## ğŸ‰ æœ€ç»ˆæ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·éªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] LoadingåŠ¨ç”»æ­£å¸¸æ’­æ”¾
- [ ] æ‹çˆ±æ—¶å…‰æœºæ˜¾ç¤ºæ­£ç¡®å¤©æ•°
- [ ] çŠ¶æ€å¡ç‰‡èƒ½è·å–å®æ—¶çŠ¶æ€
- [ ] ç”Ÿæ—¥å€’è®¡æ—¶è®¡ç®—æ­£ç¡®
- [ ] äº’åŠ¨åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ç§»åŠ¨ç«¯çŠ¶æ€æ›´æ–°æ­£å¸¸
- [ ] éŸ³é¢‘æ’­æ”¾åŠŸèƒ½æ­£å¸¸
- [ ] å“åº”å¼è®¾è®¡åœ¨å„è®¾å¤‡ä¸Šæ­£å¸¸

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
2. æ£€æŸ¥ç«¯å£å’Œé˜²ç«å¢™è®¾ç½®
3. ç¡®è®¤æ‰€æœ‰ä¾èµ–éƒ½æ­£ç¡®å®‰è£…
4. éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®

---

**ğŸ‚ ç¥æœ¨å¤´ç”Ÿæ—¥å¿«ä¹ï¼å¸Œæœ›è¿™ä¸ªç½‘ç«™èƒ½ç»™å¥¹å¸¦æ¥æƒŠå–œï¼**
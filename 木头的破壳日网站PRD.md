# 木头的破壳日网站 - 产品需求文档(PRD)

## 项目概述

**项目名称**: 木头的破壳日纪念网站  
**项目目标**: 为女朋友创建一个浪漫的生日纪念网站，展示恋爱时光、实时动态和互动功能  
**开发周期**: 2周（目标7月16日前完成）  
**技术栈**: Vue.js + Python Flask + Socket.io + Sleepy状态监控  

## 核心功能模块

### 1. Loading 回忆相册 📸
**功能描述**: 网站加载时以优雅的方式展示恋爱回忆照片
- **照片轮播**: 3-5张精选回忆照片，带淡入淡出效果
- **加载进度条**: 心形或花朵主题的进度条
- **背景音乐**: 柔和的背景音乐（可选择关闭）
- **加载文案**: "正在加载我们的美好回忆..." 等温馨提示

### 2. 恋爱计时器 ⏰
**功能描述**: 醒目展示恋爱天数统计
- **主展示区**: 大字体显示"我们在一起已经 XXX 天了"
- **起始日期**: 2022年11月2日
- **精确计算**: 实时更新到天、小时、分钟
- **动画效果**: 数字跳动或心跳动画
- **特殊节点**: 100天、200天、365天等里程碑高亮

### 3. 生日倒计时与祝福 🎂
**功能描述**: 生日特殊页面和倒计时功能
- **木头生日倒计时**: 距离7月16日倒计时
- **我的生日倒计时**: 距离7月27日倒计时
- **生日当天特效**:
  - 烟花动画（Canvas/CSS实现）
  - "木头破壳日快乐！"大字展示
  - 生日歌播放
  - 特殊生日祝福文案轮播
  - 生日帽、气球等装饰元素

### 4. 实时状态展示 📱
**功能描述**: 基于Sleepy项目的实时状态监控系统
- **状态展示**:
  - 📱 "林璐现在正在使用微信"
  - 💻 "林璐正在用VS Code写代码" 
  - 🎮 "林璐在玩游戏，请勿打扰"
  - 😴 "林璐在睡觉zzz..."
  - 🏃‍♂️ "林璐刚完成了5km跑步！"
  - 🎵 "林璐正在听音乐"

- **技术实现**（基于Sleepy架构）:
  - **后端**: Python Flask服务器
  - **API接口**:
    - `/query` - 获取当前状态
    - `/get/status_list` - 获取所有状态列表
    - `/set?secret=<密钥>&status=<状态>` - 更新状态
  - **状态配置**: JSON文件存储状态信息（ID、名称、描述、颜色）
  - **移动端集成**: 使用Macrodroid或Tasker自动检测APP使用情况
  - **前端轮询**: 每30秒查询一次状态更新

- **状态类型设计**:
  ```json
  {
    "1": {"name": "睡觉中", "desc": "林璐在睡觉zzz...", "color": "#9b59b6"},
    "2": {"name": "工作中", "desc": "林璐正在努力工作", "color": "#3498db"},
    "3": {"name": "运动中", "desc": "林璐正在运动💪", "color": "#e74c3c"},
    "4": {"name": "看B站", "desc": "林璐正在刷B站", "color": "#ff69b4"},
    "5": {"name": "玩游戏", "desc": "林璐在游戏世界里", "color": "#f39c12"}
  }
  ```

### 5. 运动数据展示 🏃‍♂️
**功能描述**: Apple Watch运动数据集成
- **数据展示**:
  - 最近的5km跑步记录
  - 每日步数、卡路里
  - 心率数据可视化
  - 运动成就徽章
- **技术实现**:
  - Apple HealthKit API（如可用）
  - 手动记录 + 自动状态更新
  - 数据图表（Chart.js）
- **与状态系统集成**:
  - 运动完成后自动更新状态为"刚完成运动"
  - 运动数据同步显示在状态描述中

### 6. 互动功能区 💝
**功能描述**: 增强网站互动性和趣味性
- **留言板**:
  - 实时留言功能
  - 可以给对方留小纸条
  - 表情包和贴纸功能
- **小游戏**:
  - 恋爱测试小问卷
  - 记忆翻牌游戏（用两人照片）
  - 情侣默契度测试
- **状态互动**:
  - 可以给对方的状态点赞
  - 留言"快去睡觉"、"加油工作"等

### 7. 动态时间线 📝
**功能描述**: 展示两人的重要动态和里程碑
- **动态类型**:
  - 生日倒计时提醒
  - 运动成就分享
  - 状态变化记录
  - 恋爱纪念日
  - 特殊节日提醒
- **展示方式**:
  - 时间轴形式
  - 状态变化历史
  - 图文并茂的动态卡片

## 技术架构

### 前端技术栈
- **框架**: Vue.js 3 + Composition API
- **UI库**: Element Plus / Naive UI
- **动画**: GSAP / CSS3 动画
- **图表**: Chart.js
- **样式**: SCSS + 响应式设计
- **状态管理**: Pinia

### 后端技术栈
- **主服务器**: Node.js + Express（网站主体）
- **状态服务**: Python Flask（基于Sleepy项目）
- **数据库**: SQLite（简单轻量）
- **实时通信**: Socket.io + 定时轮询
- **文件存储**: 本地存储

### 状态监控系统（基于Sleepy）
- **服务端**: Python Flask + JSON配置
- **移动端**: 
  - Android: Macrodroid自动化
  - iOS: 快捷指令 + 手动触发
- **API设计**:
  ```
  GET /api/status/query          # 获取当前状态
  GET /api/status/list           # 获取状态列表  
  POST /api/status/set           # 更新状态（需要密钥）
  GET /api/status/history        # 状态历史记录
  ```

### 部署方案
- **开发环境**: 
  - 前端: http://127.0.0.1:3000
  - 状态服务: http://127.0.0.1:5000
- **生产环境**: 你的个人服务器
- **域名配置**: 子域名或端口分离

## 设计风格

### 整体风格
- **主题色彩**: 粉色渐变 + 温暖橙色
- **设计语言**: 可爱浪漫风格
- **字体**: 温柔圆润的中文字体
- **图标**: 心形、花朵、星星等元素

### 状态展示设计
- **状态卡片**: 圆角卡片 + emoji + 可爱描述
- **颜色主题**: 每种状态有专属颜色
- **动画效果**: 状态切换时的淡入淡出
- **最后更新**: 显示"5分钟前更新"等时间提示

## 开发计划

### 第一阶段（第1周）
- [x] 需求分析和技术调研
- [ ] 项目初始化（Vue + Flask双服务）
- [ ] Sleepy状态监控系统部署和测试
- [ ] Loading页面和相册功能
- [ ] 恋爱计时器功能
- [ ] 基础状态展示页面

### 第二阶段（第2周）
- [ ] 生日倒计时和特效功能
- [ ] 移动端状态自动更新配置
- [ ] 运动数据集成
- [ ] 互动功能开发
- [ ] 样式美化和动画效果
- [ ] 部署和上线测试

### 移动端配置
- **Android**: 
  1. 安装Macrodroid
  2. 导入预设的状态更新宏
  3. 配置APP检测规则
- **iOS**:
  1. 创建快捷指令
  2. 设置自动化触发
  3. 手动状态更新为主

## 风险评估与解决方案

### 技术风险
- **Sleepy集成**: 需要学习Flask和API调用 ✅ 难度较低
- **移动端自动化**: iOS限制较多，主要依赖手动更新
- **服务器部署**: 需要同时运行Vue和Flask服务

### 时间风险
- **MVP策略**: 先实现状态展示核心功能
- **分期开发**: 生日前完成基础功能，后续优化

### 备选方案
1. **简化版状态**: 先实现手动更新，后续加入自动化
2. **单服务部署**: 如果双服务复杂，可以集成到Node.js中
3. **基础功能优先**: 确保生日当天核心功能可用

## 特色亮点

### 1. 个性化状态描述
- "林璐正在和代码作斗争💻"
- "林璐刚刚完成了今天的5km，好棒！🏃‍♂️"
- "林璐在看沙雕视频笑到不行😂"

### 2. 智能状态推荐
- 根据时间自动建议状态（晚上11点提醒"该睡觉了"）
- 运动完成后自动切换到"刚完成运动"状态

### 3. 情侣互动
- 对方状态变化时的可爱通知
- 可以给对方的状态留言或点赞
- 状态历史回顾功能

---

**这个基于Sleepy项目的PRD更符合实际技术可行性，你觉得怎么样？** 💝